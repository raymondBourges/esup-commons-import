<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:e="http://commons.esup-portail.org"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="/stylesheets/template.xhtml">
	<ui:define name="content">
		<e:section value="#{msgs['JPA_DEMO.TITLE']}" />
		<t:div id="messages" styleClass="messageForUser">
			<e:messages showDetail="true" showSummary="true"/>
		</t:div>
		<t:htmlTag value="br" />
		<e:subSection value="#{msgs['JPA_DEMO.TITLE.ADD_USER']}" />
		<t:htmlTag value="br" />
		<h:form id="myform4">
			
			<!-- Exemple component facelet cf WEB-INF/jsf/components/rowInput.xhtml -->
			<e:ul styleClass="fl-controls-left fl-container-700">
				<e:rowInput id="uid" label="uid :" size="30" maxlength="50"
					text="#{userBean.id}" required="true" />
				<e:rowInput id="displayName" label="displayName :" size="30"
					maxlength="100" text="#{userBean.displayName}" />
			</e:ul>
			<t:htmlTag value="hr" />
			<t:htmlTag value="br" />
			<h:commandButton value="add" action="#{welcomeController.addUser}"/>
			<h:commandButton value="cancel" action="#{welcomeController.reset}" />
		</h:form>
		<t:htmlTag value="br" />
		<t:htmlTag value="hr" />
		<t:htmlTag value="br" />
		<h:form id="myform3">
			<h:dataTable id="tableUser" value="#{welcomeController.users}"
				var="user" styleClass="paginatorData"
				rowClasses="paginatorData-text,paginatorData-alternate"
				headerClass="paginatorData-header">
				<f:facet name="header">
					<e:paginator id="paginatorUser" paginator="#{userPaginator}"
						itemsName="Utilisateurs" reRender="myform3" />
				</f:facet>
				<f:facet name="footer">
					<e:paginator id="paginatorUserFooter" paginator="#{userPaginator}"
						itemsName="Utilisateurs" itemsNumbersFlag="#{false}"
						itemsPerPageFlag="#{false}" reRender="myform3" />
				</f:facet>
				<h:column>
					<f:facet name="header">
						<h:outputText value="uid" />
					</f:facet>
					<h:outputText value="#{user.id}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="User" />
					</f:facet>
					<h:outputText value="#{user.displayName}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Informations" />
					</f:facet>
					<ui:repeat value="#{user.informations}" var="information">
						<h:outputText
							value="#{information.informationKey} - #{information.informationValue}" />
						<t:htmlTag value="br" />
					</ui:repeat>
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Action" />
					</f:facet>
					<h:commandButton value="delete"
						action="#{welcomeController.deleteUser}" >
						<f:setPropertyActionListener value="#{user}"
							target="#{welcomeController.deletableUser}" />
					</h:commandButton>
				</h:column>
			</h:dataTable>

		</h:form>
		<t:div style="clear:both;" />

	</ui:define>
</ui:composition>
